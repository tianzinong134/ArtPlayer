{"mappings":"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","sources":["packages/artplayer-plugin-chromecast/src/index.js","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["function loadScript(src) {\n    return new Promise((resolve, reject) => {\n        const script = document.createElement('script');\n        script.src = src;\n        script.onload = resolve;\n        script.onerror = reject;\n        document.body.appendChild(script);\n    });\n}\n\nfunction getMimeType(url) {\n    const extension = url.split('?')[0].split('#')[0].split('.').pop().toLowerCase();\n    const mimeTypes = {\n        mp4: 'video/mp4',\n        webm: 'video/webm',\n        ogg: 'video/ogg',\n        ogv: 'video/ogg',\n        mp3: 'audio/mp3',\n        wav: 'audio/wav',\n        flv: 'video/x-flv',\n        mov: 'video/quicktime',\n        avi: 'video/x-msvideo',\n        wmv: 'video/x-ms-wmv',\n        mpd: 'application/dash+xml',\n        m3u8: 'application/x-mpegURL',\n    };\n    return mimeTypes[extension] || 'application/octet-stream';\n}\n\nexport default function artplayerPluginChromecast(option) {\n    const DEFAULT_ICON = `<svg height=\"20\" width=\"20\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path d=\"M512 96H64v99c-13-2-26.4-3-40-3H0V96C0 60.7 28.7 32 64 32H512c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H288V456c0-13.6-1-27-3-40H512V96zM24 224c128.1 0 232 103.9 232 232c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-101.6-82.4-184-184-184c-13.3 0-24-10.7-24-24s10.7-24 24-24zm8 192a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM0 344c0-13.3 10.7-24 24-24c75.1 0 136 60.9 136 136c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-48.6-39.4-88-88-88c-13.3 0-24-10.7-24-24z\"/></svg>`;\n    const DEFAULT_SDK = 'https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1';\n\n    window['__onGCastApiAvailable'] = function (isAvailable) {\n        artplayerPluginChromecast.isAvailable = isAvailable;\n        if (isAvailable) {\n            cast.framework.CastContext.getInstance().setOptions({\n                receiverApplicationId: chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,\n                autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,\n            });\n        }\n    };\n\n    return async (art) => {\n        await loadScript(option.sdk || DEFAULT_SDK);\n\n        function castVideo(session) {\n            const url = option.url || art.option.url;\n            const mimeType = option.mimeType || getMimeType(url);\n            const mediaInfo = new chrome.cast.media.MediaInfo(url, mimeType);\n            const request = new chrome.cast.media.LoadRequest(mediaInfo);\n            session.loadMedia(request).then(\n                function () {\n                    console.log('Media loaded successfully');\n                },\n                function (error) {\n                    art.notice.show = 'Error casting media';\n                    console.log('Error casting media', error);\n                },\n            );\n        }\n\n        art.controls.add({\n            name: 'chromecast',\n            position: 'right',\n            tooltip: 'Chromecast',\n            html: `<i class=\"art-icon art-icon-cast\">${option.icon || DEFAULT_ICON}</i>`,\n            click() {\n                if (!artplayerPluginChromecast.isAvailable) {\n                    art.notice.show = 'Cast API is not available';\n                    return;\n                }\n\n                const castSession = cast.framework.CastContext.getInstance().getCurrentSession();\n\n                if (castSession) {\n                    castVideo(castSession);\n                } else {\n                    cast.framework.CastContext.getInstance()\n                        .requestSession()\n                        .then(\n                            function (session) {\n                                castVideo(session);\n                            },\n                            function (error) {\n                                art.notice.show = 'Error connecting to cast session';\n                                console.log('Error connecting to cast session', error);\n                            },\n                        );\n                }\n            },\n        });\n\n        return {\n            name: 'artplayerPluginChromecast',\n        };\n    };\n}\n\nif (typeof window !== 'undefined') {\n    window['artplayerPluginChromecast'] = artplayerPluginChromecast;\n}\n","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../../"}